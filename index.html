<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Radioactivity Master Simulation</title>
    <style>
        :root {
            --bg: #121212;
            --panel: #1e1e1e;
            --text: #e0e0e0;
            --alpha: #ff5252; /* Red */
            --beta: #69f0ae;  /* Green */
            --gamma: #448aff; /* Blue */
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
        }

        h1 { margin-bottom: 5px; color: #fff; text-transform: uppercase; letter-spacing: 2px; }
        p { color: #aaa; margin-top: 0; }

        /* TABS */
        .tabs { margin: 20px 0; }
        .tab-btn {
            background: #333;
            color: #aaa;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 1rem;
            transition: 0.3s;
        }
        .tab-btn.active {
            background: var(--gamma);
            color: white;
            box-shadow: 0 0 10px rgba(68, 138, 255, 0.5);
        }

        /* CONTAINERS */
        .mode-container { display: none; max-width: 800px; margin: 0 auto; }
        .mode-container.active { display: block; }

        .panel {
            background: var(--panel);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            border: 1px solid #333;
        }

        /* --- MODE 1: DECAY SIMULATION --- */
        canvas {
            background: #000;
            border-radius: 8px;
            border: 1px solid #444;
            display: block;
            margin: 0 auto 20px auto;
            cursor: crosshair;
        }

        .controls { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        
        .btn {
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            color: #000;
            transition: transform 0.1s;
        }
        .btn:active { transform: scale(0.95); }
        .btn-a { background: var(--alpha); box-shadow: 0 0 10px var(--alpha); }
        .btn-b { background: var(--beta); box-shadow: 0 0 10px var(--beta); }
        .btn-g { background: var(--gamma); box-shadow: 0 0 10px var(--gamma); }
        
        .info-panel {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
            text-align: left;
        }
        .info-card {
            background: #252525;
            padding: 15px;
            border-radius: 8px;
            border-top: 4px solid #555;
            font-size: 0.9rem;
        }
        .info-card h3 { margin: 0 0 10px 0; color: #fff; }

        /* --- MODE 2: HALF LIFE --- */
        .grid-wrapper {
            display: grid;
            grid-template-columns: repeat(20, 1fr);
            gap: 5px;
            margin: 20px auto;
            width: 100%;
            max-width: 500px;
        }
        .atom {
            aspect-ratio: 1;
            background-color: var(--alpha);
            border-radius: 50%;
            transition: 0.5s;
        }
        .atom.stable {
            background-color: #333;
            transform: scale(0.5);
        }
        .stats {
            font-size: 1.5rem;
            margin: 20px;
            font-weight: bold;
        }

    </style>
</head>
<body>

    <h1>☢️ Radioactive Physics Lab</h1>
    <p>Select a mode below to start experimenting</p>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchMode('decay')">Mode 1: Types of Decay</button>
        <button class="tab-btn" onclick="switchMode('halflife')">Mode 2: Half-Life</button>
    </div>

    <div id="decay-mode" class="mode-container active">
        <div class="panel">
            <canvas id="simCanvas" width="700" height="350"></canvas>
            
            <div class="controls">
                <button class="btn btn-a" onclick="triggerDecay('alpha')">Trigger Alpha (α)</button>
                <button class="btn btn-b" onclick="triggerDecay('beta')">Trigger Beta (β)</button>
                <button class="btn btn-g" onclick="triggerDecay('gamma')">Trigger Gamma (γ)</button>
                <button class="btn" style="background:#444; color:#fff;" onclick="resetNucleus()">Reset</button>
            </div>

            <div class="info-panel">
                <div class="info-card" style="border-color: var(--alpha)">
                    <h3>α Alpha</h3>
                    <p><strong>What:</strong> 2 Protons + 2 Neutrons (Helium Nucleus).</p>
                    <p><strong>Speed:</strong> Slow & Heavy.</p>
                    <p><strong>Stopped by:</strong> Paper or Skin.</p>
                </div>
                <div class="info-card" style="border-color: var(--beta)">
                    <h3>β Beta</h3>
                    <p><strong>What:</strong> High speed Electron.</p>
                    <p><strong>Speed:</strong> Fast & Light.</p>
                    <p><strong>Stopped by:</strong> Aluminum Foil.</p>
                </div>
                <div class="info-card" style="border-color: var(--gamma)">
                    <h3>γ Gamma</h3>
                    <p><strong>What:</strong> Pure Energy Wave (Photon).</p>
                    <p><strong>Speed:</strong> Speed of Light.</p>
                    <p><strong>Stopped by:</strong> Thick Lead.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="halflife-mode" class="mode-container">
        <div class="panel">
            <h2>Half-Life Visualizer</h2>
            <p>We start with 200 radioactive atoms. Every "tick", half of the remaining red atoms will decay.</p>
            
            <div class="stats">
                <span id="atomCount" style="color: var(--alpha)">200</span> Atoms Remaining
                <br>
                <span id="timeCount" style="font-size: 1rem; color:#888">0 Half-Lives Passed</span>
            </div>

            <button class="btn btn-a" onclick="startHalfLife()">Start Simulation</button>
            <button class="btn" style="background:#444; color:#fff;" onclick="resetHalfLife()">Reset</button>

            <div class="grid-wrapper" id="atomGrid">
                </div>
        </div>
    </div>

<script>
    // --- TAB SWITCHING ---
    function switchMode(mode) {
        document.querySelectorAll('.mode-container').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
        
        if(mode === 'decay') {
            document.getElementById('decay-mode').classList.add('active');
            document.querySelectorAll('.tab-btn')[0].classList.add('active');
            isAnimating = true;
            animate();
        } else {
            document.getElementById('halflife-mode').classList.add('active');
            document.querySelectorAll('.tab-btn')[1].classList.add('active');
            isAnimating = false; // Stop canvas to save battery
            resetHalfLife();
        }
    }

    // ================= MODE 1 JS: CANVAS =================
    const canvas = document.getElementById('simCanvas');
    const ctx = canvas.getContext('2d');
    
    // Simulation State
    let particles = []; // Ejected particles
    let nucleus = []; // Particles inside the nucleus
    let isAnimating = true;

    // Create Nucleus
    function resetNucleus() {
        nucleus = [];
        particles = [];
        // Create 30 protons/neutrons in a ball
        for(let i=0; i<30; i++) {
            nucleus.push({
                x: 350 + (Math.random()-0.5)*30,
                y: 175 + (Math.random()-0.5)*30,
                color: i%2===0 ? '#ff5252' : '#888', // Red or Gray
                baseX: 0, baseY: 0, phase: Math.random()*10
            });
        }
    }
    resetNucleus();

    // Trigger Decay
    function triggerDecay(type) {
        let angle = Math.random() * Math.PI * 2;
        
        if(type === 'alpha') {
            // Remove 4 from nucleus
            nucleus.splice(0, 4);
            // Add Alpha Particle
            particles.push({
                x: 350, y: 175, vx: Math.cos(angle)*1.5, vy: Math.sin(angle)*1.5,
                type: 'alpha', color: '#ff5252'
            });
        } 
        else if (type === 'beta') {
            // Change a neutron to proton
            if(nucleus[0]) nucleus[0].color = '#ff5252';
            // Add Beta Particle
            particles.push({
                x: 350, y: 175, vx: Math.cos(angle)*4, vy: Math.sin(angle)*4,
                type: 'beta', color: '#69f0ae'
            });
        }
        else if (type === 'gamma') {
            // Add Gamma Wave
            particles.push({
                x: 350, y: 175, vx: Math.cos(angle)*5, vy: Math.sin(angle)*5,
                type: 'gamma', color: '#448aff', phase: 0
            });
        }
    }

    // Animation Loop
    function animate() {
        if(!isAnimating) return;
        ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; // Trails effect
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Draw Nucleus (Wobbly)
        let time = Date.now() * 0.002;
        for(let p of nucleus) {
            let wobbleX = Math.sin(time + p.phase) * 1.5;
            let wobbleY = Math.cos(time + p.phase) * 1.5;
            
            ctx.beginPath();
            ctx.arc(p.x + wobbleX, p.y + wobbleY, 8, 0, Math.PI*2);
            ctx.fillStyle = p.color;
            ctx.fill();
            ctx.strokeStyle = '#222';
            ctx.stroke();
        }

        // Draw Ejected Particles
        for(let i=particles.length-1; i>=0; i--) {
            let p = particles[i];
            p.x += p.vx;
            p.y += p.vy;

            if(p.type === 'alpha') {
                // Draw 4 balls cluster
                ctx.fillStyle = p.color;
                ctx.beginPath(); ctx.arc(p.x-4, p.y-4, 6, 0, Math.PI*2); ctx.fill();
                ctx.beginPath(); ctx.arc(p.x+4, p.y+4, 6, 0, Math.PI*2); ctx.fill();
                ctx.fillStyle = '#bbb';
                ctx.beginPath(); ctx.arc(p.x-4, p.y+4, 6, 0, Math.PI*2); ctx.fill();
                ctx.beginPath(); ctx.arc(p.x+4, p.y-4, 6, 0, Math.PI*2); ctx.fill();
            } 
            else if (p.type === 'beta') {
                // Glowing dot
                ctx.shadowBlur = 10; ctx.shadowColor = p.color;
                ctx.fillStyle = p.color;
                ctx.beginPath(); ctx.arc(p.x, p.y, 4, 0, Math.PI*2); ctx.fill();
                ctx.shadowBlur = 0;
            }
            else if (p.type === 'gamma') {
                // Wavy line
                ctx.strokeStyle = p.color;
                ctx.lineWidth = 3;
                ctx.beginPath();
                // Draw a sine wave segment
                ctx.moveTo(p.x - p.vx*4, p.y - p.vy*4);
                let perpX = -p.vy; 
                let perpY = p.vx;
                // Wiggle
                let wiggle = Math.sin(time*10) * 5;
                ctx.lineTo(p.x + perpX*wiggle/5, p.y + perpY*wiggle/5);
                ctx.stroke();
            }

            // Remove off screen
            if(p.x < 0 || p.x > 700 || p.y < 0 || p.y > 350) particles.splice(i, 1);
        }

        requestAnimationFrame(animate);
    }
    // Start animation initially
    animate();


    // ================= MODE 2 JS: HALF LIFE =================
    const grid = document.getElementById('atomGrid');
    let halfLifeInterval;

    function resetHalfLife() {
        clearInterval(halfLifeInterval);
        grid.innerHTML = '';
        document.getElementById('atomCount').innerText = "200";
        document.getElementById('timeCount').innerText = "0 Half-Lives Passed";
        
        // Create 200 Atoms
        for(let i=0; i<200; i++) {
            let div = document.createElement('div');
            div.className = 'atom';
            grid.appendChild(div);
        }
    }

    function startHalfLife() {
        let count = 0;
        clearInterval(halfLifeInterval);
        
        halfLifeInterval = setInterval(() => {
            count++;
            document.getElementById('timeCount').innerText = count + " Half-Lives Passed";
            
            let atoms = document.querySelectorAll('.atom:not(.stable)');
            if(atoms.length === 0) {
                clearInterval(halfLifeInterval);
                return;
            }

            // Decay ~50% of remaining atoms
            atoms.forEach(atom => {
                if(Math.random() > 0.5) {
                    atom.classList.add('stable');
                }
            });

            // Update counter
            let remaining = document.querySelectorAll('.atom:not(.stable)').length;
            document.getElementById('atomCount').innerText = remaining;

        }, 1500); // 1.5 seconds per half-life tick
    }

</script>
</body>
</html>